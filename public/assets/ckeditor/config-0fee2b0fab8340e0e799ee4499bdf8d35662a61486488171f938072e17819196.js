CKEDITOR.editorConfig=function(i){i.filebrowserBrowseUrl="/ckeditor/attachment_files",i.filebrowserFlashBrowseUrl="/ckeditor/attachment_files",i.filebrowserFlashUploadUrl="/ckeditor/attachment_files",i.filebrowserImageBrowseLinkUrl="/ckeditor/pictures",i.filebrowserImageBrowseUrl="/ckeditor/pictures",i.filebrowserImageUploadUrl="/ckeditor/pictures",i.filebrowserUploadUrl="/ckeditor/attachment_files",i.filebrowserParams=function(){for(var e,r,t,n=document.getElementsByTagName("meta"),a=new Object,i=0;i<n.length;i++)switch((t=n[i]).name){case"csrf-token":e=t.content;break;case"csrf-param":r=t.content;break;default:continue}return r!==undefined&&e!==undefined&&(a[r]=e),a},i.addQueryString=function(e,r){var t=[];if(!r)return e;for(var n in r)t.push(n+"="+encodeURIComponent(r[n]));return e+(-1!=e.indexOf("?")?"&":"?")+t.join("&")},CKEDITOR.on("dialogDefinition",function(e){var r,t,n=e.data.name,a=e.data.definition;-1<CKEDITOR.tools.indexOf(["link","image","attachment","flash"],n)&&(t=null==(r=a.getContents("Upload")||a.getContents("upload"))?null:r.get("upload"))&&t.filebrowser&&t.filebrowser.params===undefined&&(t.filebrowser.params=i.filebrowserParams(),t.action=i.addQueryString(t.action,t.filebrowser.params))})};